<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>nbaR: R access to the Netherlands Biodiversity API • rOpenSci: nbaR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/all.min.css" integrity="sha256-PbSmjxuVAzJ6FPvNYsrXygfGhNJYyZ2GktDbkMBqQZg=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.1/css/v4-shims.min.css" integrity="sha256-A6jcAdwFD48VMjlI3GDxUd+eCQa7/KWy6G9oe/ovaPA=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- ropensci --><link href="../ropensci.css" rel="stylesheet">
<meta property="og:title" content="nbaR: R access to the Netherlands Biodiversity API">
<meta property="og:description" content="nbaR">
<meta name="twitter:card" content="summary">
<!-- Matomo --><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.css">
<script src="https://cdn.jsdelivr.net/npm/cookieconsent@3/build/cookieconsent.min.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
<!-- End Matomo Code -->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <div class="navbar-brand-container">
        <a href="https://ropensci.org"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
        <a class="navbar-brand" href="../index.html"><i>nbaR <small>v0.1.0</small></i></a>
      </div>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/nbaR.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/apiclient.html">Objects and advanced queries</a>
    </li>
    <li>
      <a href="../articles/services.html">Services summary</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Example Workflows
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/sharks.html">Calibrating a molecular phylogeny of the sharks</a>
    </li>
    <li>
      <a href="../articles/tomato.html">The oldest tomato specimen in the world</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/apiclient.html">nbaR API client: concepts and object model</a>
    </li>
    <li>
      <a href="../articles/services.html">nbaR services examples</a>
    </li>
    <li>
      <a href="../articles/sharks.html">Calibrating a molecular phylogeny of the sharks</a>
    </li>
    <li>
      <a href="../articles/tomato.html">The oldest tomato specimen in the world</a>
    </li>
  </ul>
</li>
        <li>
  <a href="https://github.com/naturalis/nbaR">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right docsearch" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>nbaR: R access to the Netherlands Biodiversity API</h1>
            
            <h4 class="date">Mar 13, 2021</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/nbaR/blob/master/vignettes/nbaR.Rmd"><code>vignettes/nbaR.Rmd</code></a></small>
      <div class="hidden name"><code>nbaR.Rmd</code></div>

    </div>

    
    
<div id="background" class="section level1">
<h1 class="hasAnchor">
<a href="#background" class="anchor"></a>Background</h1>
<div id="the-netherlands-biodiversity-api" class="section level2">
<h2 class="hasAnchor">
<a href="#the-netherlands-biodiversity-api" class="anchor"></a>The Netherlands Biodiversity API</h2>
<p>The Netherlands Biodiversity API (NBA) facilitates access to the Natural History Collection at Naturalis Biodiversity Center. Next to museum specimen records and metadata, access to taxonomic classification and nomenclature, to geographical information, and to multimedia files is provided. By using the powerful Elasticsearch engine, the NBA facilitates searching for collection- and biodiversity data in near real-time. Furthermore, by incorporating information from taxonomic databases, taxonomic name resolution can be accomplished with the NBA. Persistent Uniform Resource Identifiers (PURLs) ensure that each specimen accessible via the NBA is represented by a citeable unambiguous web reference. Access to our data is provided via a RESTful interface and several clients such as the <a href="http://bioportal.naturalis.nl/">BioPortal</a>, a web application for browsing biodiversity data that is served by the NBA. For more information about the NBA, please see our <a href="http://docs.biodiversitydata.nl/">detailed documentation</a>.</p>
</div>
<div id="r-access" class="section level2">
<h2 class="hasAnchor">
<a href="#r-access" class="anchor"></a>R access</h2>
<p>The R programming language is established as a common tool in scientific research, with growing adoption by researchers in biodiversity research. Hence, to ease the access to the NBA for researchers, we developed this R client.</p>
</div>
</div>
<div id="full-client-vs-wrapper-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#full-client-vs-wrapper-functions" class="anchor"></a>Full client vs wrapper functions</h1>
<p>nbaR aims to be a <em>full</em> client of the NBA API, meaning that it implements all endpoints and the entire NBA object model. The client thus facilitates all API queries possible. Complex objects returned by the API, such as <code>Specimen</code> or <code>Taxon</code> objects are implemented as <code>R6</code> classes. This includes also objects used for querying (<code>QuerySpec</code> and <code>QueryCondition</code>, respectively, see also <a href="apiclient.html">here</a>).</p>
<p>For many queries, the full functionality of the NBA won’t be required. The package therefore offers a <strong>wrapper function</strong> for each endpoint that does not use <code>R6</code> classes but common R data structes, such as <code>list</code> and <code>data.frame</code>. However, querying capabilities are limited for these wrappers. Below we will show how to set up some simple queries using the wrapper functions.</p>
</div>
<div id="quick-start-querying-the-nba-using-wrapper-functions" class="section level1">
<h1 class="hasAnchor">
<a href="#quick-start-querying-the-nba-using-wrapper-functions" class="anchor"></a>Quick start: querying the NBA using wrapper functions</h1>
<p>The data in the NBA consists of four main data types (see <a href="http://docs.biodiversitydata.nl/">NBA docs</a>):</p>
<ul>
<li>Specimen</li>
<li>Taxon</li>
<li>Multimedia</li>
<li>Geo</li>
</ul>
<p>Wrapper functions start with the data type (lower-case letter) and an underscore (<code>specimen_*</code>, <code>taxon_*</code>) etc. There is a wrapper function for each endpoint (see <a href="https://docs.biodiversitydata.nl/endpoints-reference/">here</a> for all endpoints); camelCase naming is replaced by snake_case. The NBA endpoint <code>getDistinctValues</code> for specimen data, for instance, is called by the function <code>specimen_get_distinct_values</code>.</p>
<p>Specimen services provide the interface to the Naturalis collection and to species occurrences (see <a href="https://docs.biodiversitydata.nl/en/latest/doc-spec-services/specimen/">here</a>), wheras Taxon services provide data from taxonomic checklists (see <a href="https://docs.biodiversitydata.nl/en/latest/doc-spec-services/taxon/">here</a>). Multimedia services give access to photos, videos and sound data (see <a href="https://docs.biodiversitydata.nl/en/latest/doc-spec-services/multimedia/">here</a>); Geo services store polygon data for geographical regions and nature reserves (see <a href="https://docs.biodiversitydata.nl/en/latest/doc-spec-services/geo/">here</a>).</p>
<div id="querying-specimen-records" class="section level2">
<h2 class="hasAnchor">
<a href="#querying-specimen-records" class="anchor"></a>Querying specimen records</h2>
<p>Suppose we want to look up specimens of the genus <em>Mola</em> (sunfish). To find out what field of the NBA we could query, we can use the function <code><a href="../reference/specimen_get_paths.html">specimen_get_paths()</a></code> (see <code><a href="../reference/specimen_get_paths.html">?specimen_get_paths</a></code> for documentation).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://docs.ropensci.org/nbaR">'nbaR'</a></span><span class="op">)</span>

<span class="va">all_paths</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/specimen_get_paths.html">specimen_get_paths</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">all_paths</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] "sourceSystem.code" "sourceSystem.name" "sourceSystemId"   
## [4] "recordURI"         "unitID"            "unitGUID"</code></pre>
<p>Note that paths of nested objects are seperated via a <code>.</code>. To search for a specific genus, we can query the field <code>identifications.scientificName.genusOrMonomial</code>. The <code>specimen_query</code> method lets us query for a specific field, where the query parameters are given as a named list (a named vector also works!):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">queryParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"identifications.scientificName.genusOrMonomial"</span> <span class="op">=</span>
                        <span class="st">"Mola"</span><span class="op">)</span>
<span class="va">sp_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/specimen_query.html">specimen_query</a></span><span class="op">(</span><span class="va">queryParams</span><span class="op">)</span>

<span class="co">## how many specimens are found?</span>
<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span><span class="op">(</span><span class="va">sp_data</span><span class="op">)</span></code></pre></div>
<pre><code>## [1] 10</code></pre>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## which fields are available?</span>
<span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">sp_data</span><span class="op">)</span></code></pre></div>
<pre><code>##  [1] "sourceSystem"        "sourceSystemId"      "id"                 
##  [4] "unitID"              "unitGUID"            "sourceInstitutionID"
##  [7] "sourceID"            "owner"               "licenseType"        
## [10] "license"             "recordBasis"         "collectionType"     
## [13] "preparationType"     "numberOfSpecimen"    "fromCaptivity"      
## [16] "objectPublic"        "multiMediaPublic"    "gatheringEvent"     
## [19] "identifications"     "kindOfUnit"          "phaseOrStage"</code></pre>
<p>Return type can either be <code>list</code> or <code>data.frame</code> (the default). Note that nested structures in the data frame are represented as list columns (for instance the field <code>associatedMultiMediaUris</code>). which lists, if given, all links to multimedia resources for the specimens:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sp_data</span><span class="op">$</span><span class="va">associatedMultiMediaUris</span></code></pre></div>
<pre><code>## NULL</code></pre>
</div>
<div id="querying-taxon-records" class="section level2">
<h2 class="hasAnchor">
<a href="#querying-taxon-records" class="anchor"></a>Querying taxon records</h2>
<p>Taxonomic information can be retrieved using the <strong>taxon_</strong> functions. Taxon records come from two sources, the <em>Dutch species register (Nederlands Soortregister, NSR)</em> and the <em>Catalogue of Life (COL)</em>.</p>
<p>To see how many records are from each source, we can query for all distinct values (and counts) for a specific field (see <code>taxon_get_paths</code>) for all fields in the <code>taxon</code> data:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/taxon_get_distinct_values.html">taxon_get_distinct_values</a></span><span class="op">(</span><span class="st">"sourceSystem.name"</span><span class="op">)</span></code></pre></div>
<pre><code>## $`Species 2000 - Catalogue Of Life`
## [1] 1998431
## 
## $`Naturalis - Dutch Species Register`
## [1] 50252
## 
## $`Naturalis - Dutch Caribbean Species Register`
## [1] 8713</code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## alternatively, show for sourceSystem.code</span>
<span class="fu"><a href="../reference/taxon_get_distinct_values.html">taxon_get_distinct_values</a></span><span class="op">(</span><span class="st">'sourceSystem.code'</span><span class="op">)</span></code></pre></div>
<pre><code>## $COL
## [1] 1998431
## 
## $NSR
## [1] 50252
## 
## $DCSR
## [1] 8713</code></pre>
<p>To query, for instance all the species listed in the Catalogue of life for the genus <em>Mola</em>, we can use the wrapper function <code>taxon_query</code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">## specify query parameters</span>
<span class="va">queryParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"sourceSystem.code"</span><span class="op">=</span><span class="st">"COL"</span>,
                    <span class="st">"defaultClassification.genus"</span><span class="op">=</span><span class="st">"Mola"</span><span class="op">)</span>

<span class="co">## do the query</span>
<span class="va">tax_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/taxon_query.html">taxon_query</a></span><span class="op">(</span><span class="va">queryParams</span><span class="op">)</span>

<span class="co">## access nested field 'accepted Name' -&gt; 'specificEpithet'</span>
<span class="va">tax_data</span><span class="op">$</span><span class="va">acceptedName</span><span class="op">$</span><span class="va">specificEpithet</span></code></pre></div>
<pre><code>## [1] "tecta"   "ramsayi" "mola"</code></pre>
<p>Let’s see if we can find vernacular (common) names for the species <strong>Mola ramsayi</strong>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">tax_data</span><span class="op">$</span><span class="va">vernacularNames</span><span class="op">[[</span><span class="fl">3</span><span class="op">]</span><span class="op">]</span></code></pre></div>
<pre><code>##                          name                    language
## 1                        Hana                    Albanian
## 2                         Sol                  Portuguese
## 3                        Mula                    Corsican
## 4                        Mola                      Arabic
## 5                        Mola                     Italian
## 6                        Mola                     Maltese
## 7                        Mola                     Spanish
## 8                        Mola                     Spanish
## 9                    Moonfish                     English
## 10                    Pez sol                     Spanish
## 11                    Pez sol                     Spanish
## 12                  Peixe lua                  Portuguese
## 13                  Peixe lua                  Portuguese
## 14                  Peixe lua                     Spanish
## 15                       蜇鲂            Mandarin Chinese
## 16                       蜇鱼            Mandarin Chinese
## 17                  Peixe-lua                  Portuguese
## 18                  Peixe-lua                  Portuguese
## 19                  Peixe-lua                  Portuguese
## 20                       蜇魴            Mandarin Chinese
## 21                    Sunfish                     English
## 22                    Sunfish                     English
## 23                    Sunfish                     English
## 24                    Sunfish                     English
## 25                      Rolim                  Portuguese
## 26                    Orelhão                  Portuguese
## 27               Poisson lune                      Arabic
## 28               Poisson lune                      French
## 29                 Peixe-roda                  Portuguese
## 30                Pixxitambur                     Maltese
## 31                  Pixxiluna                     Maltese
## 32              Ocean sunfish                     English
## 33              Ocean sunfish                     English
## 34              Ocean sunfish                     English
## 35              Ocean sunfish                     English
## 36              Ocean sunfish                     English
## 37              Ocean sunfish                     English
## 38              Ocean sunfish                     English
## 39              Ocean sunfish                     English
## 40              Ocean sunfish                     English
## 41              Ocean sunfish                     English
## 42              Ocean sunfish                     English
## 43              Ocean sunfish                     English
## 44                   Matahari Malay (individual language)
## 45                   Sun-fish                     English
## 46                   Sun-fish                     English
## 47           Samaket el-shams                      Arabic
## 48               Poisson-lune                      French
## 49                  Maanvisch                       Dutch
## 50                  Klumpfisk                      Danish
## 51                  Klumpfisk                   Norwegian
## 52                  Klumpfisk                     Swedish
## 53                  Hout kmar                      Arabic
## 54                     Bucanj                    Croatian
## 55                     Bucanj                     Serbian
## 56                     Bucanj                     Serbian
## 57              Dag hashemesh                      Hebrew
## 58                    Bezedor                  Portuguese
## 59             Poisson soleil                      Arabic
## 60                     개복치                      Korean
## 61                Môle commun                      French
## 62                Môle commun                      French
## 63                   Boloublè                     Fon GBE
## 64                   Samoglów                      Polish
## 65          Veliki pešibarila                    Croatian
## 66                   Pešeluna                    Croatian
## 67                      Misec                    Croatian
## 68                        Mih                    Croatian
## 69                      Bačva                    Croatian
## 70                     翻车鲀            Mandarin Chinese
## 71                 海虫(澎湖)            Mandarin Chinese
## 72                 曼波(成功)            Mandarin Chinese
## 73               Raataahuihui                       Maori
## 74                      Manbô                    Japanese
## 75               Cá Mặt trăng                  Vietnamese
## 76                 Pez cabeza                     Spanish
## 77                        Lua                  Portuguese
## 78                        Lua                  Portuguese
## 79                       Môle                      French
## 80                       Môle                      French
## 81       Almindelig klumpfisk                      Danish
## 82                 Mánafiskur                     Faroese
## 83              Pysgodyn haul                       Welsh
## 84                 Pesce mola                     Italian
## 85                  луна-рыба                     Russian
## 86   Голова-рыба обыкновенная                     Russian
## 87  Korshid-mahi-e-oghyanoosi                     Persian
## 88                   Headfish                     English
## 89                  Mondfisch                      German
## 90              Opesee-sonvis                   Afrikaans
## 91             Pervane balığı                     Turkish
## 92                  Ay balığı                     Turkish
## 93                Φεγγαρόψαρο        Modern Greek (1453-)
## 94                Fegaropsaro        Modern Greek (1453-)
## 95                       蜇魚            Mandarin Chinese
## 96                 Peste luna                    Romanian
## 97                      Mambo                    Romanian
## 98                        Bot                     Catalan
## 99                      Qamar                     Maltese
## 100                Pixxi mola                     Maltese
## 101                  Pez luna                     Spanish
## 102                  Pez luna                     Spanish
## 103                   Pervane                     Turkish
## 104                 Möhkäkala                     Finnish
## 105                  Månefisk                   Norwegian
## 106                   Maanvis                       Dutch
## 107                  Niffâkha                      Arabic
## 108                    翻車魨            Mandarin Chinese
## 109                    翻車魨            Mandarin Chinese
## 110                海蟲(澎湖)            Mandarin Chinese
## 111                曼波(成功)            Mandarin Chinese
## 112              Mbamba kubwa                    Comorian
## 113                 Takabatra                    Malagasy
## 114                    Mbamba                    Comorian
## 115              Pesciu tondu                    Corsican
## 116                   Προπέλα        Modern Greek (1453-)
## 117               Peshku hënë                    Albanian
## 118                Peshkahana                    Albanian
## 119              Morski mesec                   Slovenian
## 120        Mola ocean sunfish                     English
## 121                Pisci mola                     Italian
## 122                Pisci luna                     Italian
## 123               Pesciu meua                     Italian
## 124               Pesciu luna                     Italian
## 125               Pescio meua                     Italian
## 126                Pesce luna                     Italian
## 127                      Luna                     Italian
## 128           Mola cocciulara                     Italian
## 129                Pesce bala                     Italian
## 130                 Mulacchia                     Italian
## 131                  Girasole                     Italian
## 132               Tunglfiskur                   Icelandic
## 133             Giant sunfish                     English
## 134           Harilik kuukala                    Estonian
## 135                     Bucan                    Croatian</code></pre>
</div>
<div id="geo-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#geo-queries" class="anchor"></a>Geo queries</h2>
<p>The Geo data type in the NBA holds polygon data for countries, Dutch municipalities etc, and Dutch nature reserves. For more information please refer to the <a href="https://docs.biodiversitydata.nl/en/latest/doc-spec-services/geo/">API documentation</a>. To retreive e.g. a polygon, encoded in the <a href="http://geojson.org/">geoJSON</a> format for a country, we can query as follows:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">geo_json</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geo_get_geo_json_for_locality.html">geo_get_geo_json_for_locality</a></span><span class="op">(</span><span class="st">'Nigeria'</span><span class="op">)</span></code></pre></div>
</div>
<div id="multimedia-queries" class="section level2">
<h2 class="hasAnchor">
<a href="#multimedia-queries" class="anchor"></a>Multimedia queries</h2>
<p>Multimedia items accessible via the NBA include items captured from physical specimens (e.g. photos and videos) but also from human observations (e.g. recordings of bird sounds).</p>
<p>As an example, we will retrieve records that represent sounds that were recorded in the country <em>Cape Verde</em>. The sound data accessible via the NBA is stored in the <a href="https://www.xeno-canto.org">Xeno-Canto database</a>, hosted at the Naturalis Biodiversity Center. The field <code>sourceSystem.code</code> for these records is <code>XC</code>; the country of occurrence is stored in the field <code>gatheringEvents.country</code>.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">queryParams</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span><span class="st">"sourceSystem.code"</span><span class="op">=</span><span class="st">"XC"</span>,
                    <span class="st">"gatheringEvents.country"</span><span class="op">=</span><span class="st">"Cape Verde"</span><span class="op">)</span>

<span class="va">mm_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/multimedia_query.html">multimedia_query</a></span><span class="op">(</span><span class="va">queryParams</span><span class="op">)</span>

<span class="co">## Access link to Xeno-Canto database for each record:</span>
<span class="va">mm_data</span><span class="op">$</span><span class="va">recordURI</span></code></pre></div>
<pre><code>##  [1] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456747"
##  [2] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456850"
##  [3] "https://data.biodiversitydata.nl/xeno-canto/observation/XC156912"
##  [4] "https://data.biodiversitydata.nl/xeno-canto/observation/XC164033"
##  [5] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456724"
##  [6] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456740"
##  [7] "https://data.biodiversitydata.nl/xeno-canto/observation/XC405139"
##  [8] "https://data.biodiversitydata.nl/xeno-canto/observation/XC405554"
##  [9] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456707"
## [10] "https://data.biodiversitydata.nl/xeno-canto/observation/XC456710"</code></pre>
</div>
<div id="limitations-of-wrapper-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#limitations-of-wrapper-functions" class="anchor"></a>Limitations of wrapper functions</h2>
<p>It is important to note that querying power is limited using the wrapper functions. They relate to basic, human readable NBA queries (<a href="https://docs.biodiversitydata.nl/en/latest/quickstart/">see here</a>).</p>
<ul>
<li>
<strong>Size of result set:</strong> As by NBA default, wrapper functions only return the first 10 hits of a query.</li>
<li>
<strong>Operators:</strong> Only full matches (operator <em>EQUALS</em>) are considered in wrapper query functions. Partial matching is only available in the full API client</li>
<li>
<strong>Locical conjunctions:</strong> If multiple query conditions are given, wrapper functions only allow a simple <em>AND</em> conjunction. For more complex logical query constructs including <em>OR</em> operators or negations, the full API client must be used.</li>
</ul>
<p>The wrappers are thus designed for easy access for simple queries. In many situations it might be necessary to use the full API client which offers (almost) the entire functionality of the NBA API. Detailed documentation for the full client can be found <a href="apiclient.html">here</a>.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start bottom-8">
            <div class="col-xs-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-xs-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="http://github.com/ropensci" target="_blank"><div class="icon fab fa-github"></div></a>
                        <a href="http://github.com/ropenscilabs" target="_blank"><div class="icon fa fa-flask"></div></a>
                        <a href="http://twitter.com/ropensci" target="_blank"><div class="icon fab fa-twitter"></div></a>
                        <a href="http://vimeo.com/ropensci" target="_blank"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review">Software Review Process</a></li>
                            <li><a href="https://ropensci.org/about#team">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate">Donate</a></li>
                            <li><a href="https://ropensci.org/contact">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/">Documentation</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" target="_blank">NumFOCUS</a></p>
                        <a href="http://numfocus.org" target="_blank"></a>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '799829e946e1f0f9cd5b5a782c6316b9',
    indexName: 'ropensci-nbar',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
